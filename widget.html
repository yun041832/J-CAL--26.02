<!-- widget.html -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>위젯 팝아웃</title>
  <link rel="stylesheet" href="./style.css" />
  <style>
    body { background:#fff; }
    .chrome-less .widget-head { cursor:grab; }
    .chrome-less .widget { border:none; box-shadow:none; }
    main { padding:8px; }
  </style>
</head>
<body class="chrome-less">
  <main id="root"></main>
  <script src="./app.js?v=202601061620"></script>
  <script>
    const root = document.getElementById('root');
    const q = new URLSearchParams(location.search).get('q');
    let conf = null;
    try{ conf = JSON.parse(atob(decodeURIComponent(q||""))); }catch(e){ conf=null; }

    function mount(widget){
      root.innerHTML="";
      root.appendChild(widget);
    }
    // FEATURES가 false인 타입은 진입 차단(아무 것도 실행하지 않고 종료)
    if(conf?.type==="timer"){ if(FEATURES.timer) mount(TimerWidget()); }
    else if(conf?.type==="todo") mount(TodoWidget());
    else if(conf?.type==="memo") mount(MemoWidget());
    else if(conf?.type==="alarm"){ if(FEATURES.alarm) mount(AlarmWidget()); }
    else if(conf?.type==="stopwatch"){ if(FEATURES.stopwatch) mount(StopwatchWidget()); }
    else { if(FEATURES.calendar) mount(CalendarWidget()); }

    // 창 크기 조절 시 콘텐츠가 비율로 깔끔히 축소/확대되도록
    // => TimerWidget은 내부 scaler 사용, 다른 위젯은 CSS로 유연 반응형
  </script>
</body>
</html>
